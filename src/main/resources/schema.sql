DROP TABLE IF EXISTS USERS CASCADE;
DROP TABLE IF EXISTS ITEMS CASCADE;
DROP TABLE IF EXISTS BOOKINGS CASCADE;
DROP TABLE IF EXISTS COMMENTS CASCADE;


CREATE TABLE IF NOT EXISTS USERS
(
    ID    BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    NAME  VARCHAR(255)                            NOT NULL,
    EMAIL VARCHAR(512)                            NOT NULL,
    CONSTRAINT UQ_USER_EMAIL UNIQUE (EMAIL),
    CONSTRAINT PK_USER PRIMARY KEY (ID)
);

CREATE TABLE IF NOT EXISTS ITEMS
(
    ID           BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    NAME         VARCHAR(255)                            NOT NULL,
    DESCRIPTION  VARCHAR(512)                            NOT NULL,
    IS_AVAILABLE BOOLEAN                                 NOT NULL,
    OWNER_ID     INTEGER,
    REQUEST_ID   VARCHAR(255),
    CONSTRAINT PK_ITEMS PRIMARY KEY (ID)
);

CREATE TABLE IF NOT EXISTS BOOKINGS
(
    ID         BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    START_DATE TIMESTAMP WITHOUT TIME ZONE             NOT NULL,
    END_DATE   TIMESTAMP WITHOUT TIME ZONE             NOT NULL,
    ITEM_ID    INTEGER                                 NOT NULL,
    USER_ID    INTEGER                                 NOT NULL,
    STATUS     VARCHAR(255)                            NOT NULL,
    CONSTRAINT PK_BOOKINGS PRIMARY KEY (ID)
);


CREATE TABLE IF NOT EXISTS COMMENTS
(
    ID           BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    COMMENT_TEXT VARCHAR(512)                            NOT NULL,
    ITEM_ID      INTEGER                                 NOT NULL,
    USER_ID      INTEGER                                 NOT NULL,
    CREATED_DATE TIMESTAMP WITHOUT TIME ZONE             NOT NULL,
    CONSTRAINT PK_COMMENTS PRIMARY KEY (ID)
);
