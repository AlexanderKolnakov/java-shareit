DROP TABLE IF EXISTS USERS CASCADE;
DROP TABLE IF EXISTS ITEMS CASCADE;
DROP TABLE IF EXISTS BOOKINGS CASCADE;
DROP TABLE IF EXISTS STATUS CASCADE;



CREATE TABLE IF NOT EXISTS USERS (
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    NAME VARCHAR(255) NOT NULL,
    EMAIL VARCHAR(512) NOT NULL,
    CONSTRAINT PK_USER PRIMARY KEY (ID),
    CONSTRAINT UQ_USER_EMAIL UNIQUE (EMAIL)
    );

CREATE TABLE IF NOT EXISTS ITEMS (
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    NAME VARCHAR(255) NOT NULL,
    DESCRIPTION VARCHAR(512) NOT NULL,
    IS_AVAILABLE BOOLEAN NOT NULL,
    OWNER_ID INTEGER,
    REQUEST_ID VARCHAR(255),
    CONSTRAINT PK_ITEMS PRIMARY KEY (ID)
    );

CREATE TABLE IF NOT EXISTS BOOKINGS (
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    START_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
    END_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
    ITEM_ID INTEGER NOT NULL,
    BOOKER_ID INTEGER NOT NULL,
    STATUS_ID BIGINT,
    CONSTRAINT PK_BOOKINGS PRIMARY KEY (ID)
    );

CREATE TABLE IF NOT EXISTS STATUS (
    ID BIGINT NOT NULL AUTO_INCREMENT,
    NAME CHARACTER VARYING NOT NULL,
    CONSTRAINT STATUS_PK PRIMARY KEY (ID)
    );
